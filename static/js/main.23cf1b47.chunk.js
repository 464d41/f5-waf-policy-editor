(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{146:function(e,t,n){"use strict";n.r(t);var i=n(15),o=n(16),c=n(26),a=n(18),s=n(17),r=n(0),l=n.n(r),p=n(52),h=n.n(p),j=(n(79),n(74)),u=n(27),d=n(28),b=n(11),O=n(56),g=n(2),v=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(O.a,{variant:"pills",className:"flex-column",activeKey:this.props.activeKey,children:[Object(g.jsx)(y,{name:"General",onClick:this.props.onClick}),Object(g.jsx)(y,{name:"Blocking Settings",onClick:this.props.onClick}),Object(g.jsx)(y,{name:"Signatures",onClick:this.props.onClick}),Object(g.jsx)(y,{name:"Headers",onClick:this.props.onClick}),Object(g.jsx)(y,{name:"Bot Defense",onClick:this.props.onClick})]})}}]),n}(l.a.Component),y=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsx)(O.a.Item,{onClick:function(){return e.props.onClick(e.props.name)},children:Object(g.jsx)(O.a.Link,{eventKey:this.props.name,children:this.props.name})})}}]),n}(l.a.Component);function x(e,t,n){t=function(e){if("string"!==typeof e)return e;var t=[];return e.split(".").forEach((function(e,n){e.split(/\[([^}]+)\]/g).forEach((function(e){e.length>0&&t.push(e)}))})),t}(t);for(var i=0;i<t.length-1;i++)e=e[t[i]];e[t[t.length-1]]=n}var f=n(13),m=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={policy:o.props.policy},o}return Object(o.a)(n,[{key:"handleChange",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy);x(t.policy,e.target.id,e.target.value),this.props.onChange(t)}},{key:"render",value:function(){var e,t,n=this;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"General Settings"}),Object(g.jsxs)(f.a,{size:"sm",children:[Object(g.jsx)(f.a.Prepend,{children:Object(g.jsx)(f.a.Text,{children:"Policy Name"})}),Object(g.jsx)(u.a,{type:"text",id:"name",value:this.props.policy.policy.name||"",onChange:function(e){return n.handleChange(e)}})]}),Object(g.jsxs)(f.a,{size:"sm",children:[Object(g.jsx)(f.a.Prepend,{children:Object(g.jsx)(f.a.Text,{children:"Application Language"})}),Object(g.jsx)(u.a,{id:"applicationLanguage",value:this.props.policy.policy.applicationLanguage||"",onChange:function(e){return n.handleChange(e)}})]}),Object(g.jsxs)(f.a,{size:"sm",children:[Object(g.jsx)(f.a.Prepend,{children:Object(g.jsx)(f.a.Text,{children:"Enforcement Mode"})}),Object(g.jsx)(u.a,{id:"enforcementMode",value:this.props.policy.policy.enforcementMode||"",onChange:function(e){return n.handleChange(e)}})]}),Object(g.jsxs)(f.a,{size:"sm",children:[Object(g.jsx)(f.a.Prepend,{children:Object(g.jsx)(f.a.Text,{children:"Template"})}),Object(g.jsx)(u.a,{id:"template.name",value:(null===(e=this.props.policy.policy)||void 0===e||null===(t=e.template)||void 0===t?void 0:t.name)||"",onChange:function(e){return n.handleChange(e)}})]})]})}}]),n}(l.a.Component),C=n(55),k=n(46),V=n(45),A=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).handleChange=o.handleChange.bind(Object(c.a)(o)),o.addViolation=o.addViolation.bind(Object(c.a)(o)),o.removeViolation=o.removeViolation.bind(Object(c.a)(o)),o}return Object(o.a)(n,[{key:"handleChange",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy);x(t.policy,e.target.id,e.target.checked),this.props.onChange(t)}},{key:"addViolation",value:function(e){var t,n,i=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy),o=(null===(t=i.policy)||void 0===t||null===(n=t["blocking-settings"])||void 0===n?void 0:n.violations)||[];o.find((function(t){return t.name===e.target.id}))||o.push({name:e.target.id,alarm:this.props.policy.getAllViolations().find((function(t){return t.name===e.target.id})).alarm||!1,block:this.props.policy.getAllViolations().find((function(t){return t.name===e.target.id})).block||!1,learn:this.props.policy.getAllViolations().find((function(t){return t.name===e.target.id})).learn||!1}),i.policy["blocking-settings"]={violations:o},this.props.onChange(i)}},{key:"removeViolation",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy);t.policy["blocking-settings"].violations.length>1?t.policy["blocking-settings"].violations.splice(e.target.id,1):delete t.policy["blocking-settings"],this.props.onChange(t)}},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Blocking Settings"}),Object(g.jsxs)(k.a,{children:[Object(g.jsx)(P,{violations:this.props.policy.getAllViolations(),onClick:this.addViolation}),Object(g.jsx)(S,{policy:this.props.policy,onChange:this.handleChange,onRemove:this.removeViolation})]})]})}}]),n}(l.a.Component),P=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsx)(d.a,{children:Object(g.jsxs)(V.a,{children:[Object(g.jsx)(V.a.Toggle,{id:"dropdown-basic",children:"Violations"}),Object(g.jsx)(V.a.Menu,{children:this.props.violations.map((function(t){return Object(g.jsx)(V.a.Item,{id:t.name,onClick:e.props.onClick,children:t.title},t.name)}))})]})})}}]),n}(l.a.Component),S=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t,n,i=this;return Object(g.jsxs)("div",{children:[Object(g.jsxs)(d.a,{children:[Object(g.jsx)(b.a,{children:"Violation"}),Object(g.jsx)(b.a,{children:"Alarm"}),Object(g.jsx)(b.a,{children:"Block"}),Object(g.jsx)(b.a,{children:"Learn"}),Object(g.jsx)(b.a,{})]}),null===(e=this.props.policy.policy)||void 0===e||null===(t=e["blocking-settings"])||void 0===t||null===(n=t.violations)||void 0===n?void 0:n.map((function(e){var t;return Object(g.jsx)(d.a,{children:Object(g.jsxs)(f.a,{size:"sm",children:[Object(g.jsx)(b.a,{children:null===(t=i.props.policy.getAllViolations().find((function(t){return t.name===e.name})))||void 0===t?void 0:t.title}),Object(g.jsx)(b.a,{children:Object(g.jsx)(k.a.Check,{id:"blocking-settings.violations["+i.props.policy.policy["blocking-settings"].violations.indexOf(e)+"].alarm",checked:e.alarm||!1,onChange:function(e){return i.props.onChange(e)}})}),Object(g.jsx)(b.a,{children:Object(g.jsx)(k.a.Check,{type:"checkbox",id:"blocking-settings.violations["+i.props.policy.policy["blocking-settings"].violations.indexOf(e)+"].block",checked:e.block||!1,onChange:function(e){return i.props.onChange(e)}})}),Object(g.jsx)(b.a,{children:Object(g.jsx)(k.a.Check,{type:"checkbox",id:"blocking-settings.violations["+i.props.policy.policy["blocking-settings"].violations.indexOf(e)+"].learn",checked:e.learn||!1,onChange:function(e){return i.props.onChange(e)}})}),Object(g.jsx)(b.a,{children:Object(g.jsx)(C.a,{size:"sm",id:i.props.policy.policy["blocking-settings"].violations.indexOf(e),onClick:function(e){return i.props.onRemove(e)},children:"Remove"})})]})},e.name)}))]})}}]),n}(l.a.Component),N=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:["General"===this.props.visibleComponent&&Object(g.jsx)(m,{policy:this.props.policy,onChange:this.props.onChange}),"Blocking Settings"===this.props.visibleComponent&&Object(g.jsx)(A,{policy:this.props.policy,onChange:this.props.onChange})]})}}]),n}(l.a.Component),M=n(44),T=n.n(M),w={policy:{name:"policy_name",template:{name:"POLICY_TEMPLATE_NGINX_BASE"},applicationLanguage:"utf-8",enforcementMode:"blocking"}},L=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={policy:new T.a(w),textArea:JSON.stringify(new T.a(w),void 0,4),visibleComponent:"General"},o.handleChange=o.handleChange.bind(Object(c.a)(o)),o.handleMenuClick=o.handleMenuClick.bind(Object(c.a)(o)),o}return Object(o.a)(n,[{key:"handleChange",value:function(e){this.setState((function(t){return{policy:new T.a(e),textArea:JSON.stringify(e.toPolicy(),void 0,4)}}))}},{key:"handleTextChange",value:function(e){this.setState((function(){return{textArea:e.target.value}})),function(e){if("string"!==typeof e)return!1;try{return JSON.parse(e),!0}catch(t){return!1}}(e.target.value)&&this.setState((function(){return{policy:new T.a(JSON.parse(e.target.value))}}))}},{key:"handleMenuClick",value:function(e){this.setState((function(){return{visibleComponent:e}}))}},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"app",children:Object(g.jsxs)(j.a,{children:[Object(g.jsx)(d.a,{children:Object(g.jsx)(b.a,{children:Object(g.jsx)("h1",{children:"NGINX App Protect Policy Configurator"})})}),Object(g.jsxs)(d.a,{children:[Object(g.jsx)(b.a,{md:"auto",children:Object(g.jsx)(v,{onClick:this.handleMenuClick,activeKey:this.state.visibleComponent})}),Object(g.jsx)(b.a,{children:Object(g.jsx)(N,{policy:this.state.policy,onChange:this.handleChange,visibleComponent:this.state.visibleComponent})})]}),Object(g.jsx)(d.a,{children:Object(g.jsx)(b.a,{children:Object(g.jsx)(u.a,{as:"textarea",value:this.state.textArea,rows:20,cols:60,onChange:function(t){return e.handleTextChange(t)},style:{color:this.state.policy.isValid()?"green":"red"}})})})]})})}}]),n}(l.a.Component);h.a.render(Object(g.jsx)(L,{}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.23cf1b47.chunk.js.map