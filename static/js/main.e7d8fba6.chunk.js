(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{149:function(e,t,n){"use strict";n.r(t);var i=n(13),c=n(14),a=n(12),o=n(16),s=n(15),r=n(0),l=n.n(r),p=n(53),h=n.n(p),d=(n(83),n(78)),j=n(21),b=n(31),O=n(11),u=n(56),g=n(1),y=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(u.a,{variant:"pills",className:"flex-column",activeKey:this.props.activeKey,children:[Object(g.jsx)(x,{name:"General",onClick:this.props.onClick}),Object(g.jsx)(x,{name:"Blocking Settings",onClick:this.props.onClick}),Object(g.jsx)(x,{name:"Signatures",onClick:this.props.onClick}),Object(g.jsx)(x,{name:"Headers",onClick:this.props.onClick}),Object(g.jsx)(x,{name:"Bot Defense",onClick:this.props.onClick})]})}}]),n}(l.a.Component),x=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsx)(u.a.Item,{onClick:function(){return e.props.onClick(e.props.name)},children:Object(g.jsx)(u.a.Link,{eventKey:this.props.name,children:this.props.name})})}}]),n}(l.a.Component);function v(e,t,n){t=function(e){if("string"!==typeof e)return e;var t=[];return e.split(".").forEach((function(e,n){e.split(/\[([^}]+)\]/g).forEach((function(e){e.length>0&&t.push(e)}))})),t}(t);for(var i=0;i<t.length-1;i++)e=e[t[i]];e[t[t.length-1]]=n}var f=n(18),C=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={policy:c.props.policy},c}return Object(c.a)(n,[{key:"handleChange",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy);v(t.policy,e.target.id,e.target.value),this.props.onChange(t)}},{key:"render",value:function(){var e,t,n=this;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"General Settings"}),Object(g.jsxs)(f.a,{size:"sm",children:[Object(g.jsx)(f.a.Prepend,{children:Object(g.jsx)(f.a.Text,{children:"Policy Name"})}),Object(g.jsx)(j.a,{type:"text",id:"name",value:this.props.policy.policy.name||"",onChange:function(e){return n.handleChange(e)}})]}),Object(g.jsxs)(f.a,{size:"sm",children:[Object(g.jsx)(f.a.Prepend,{children:Object(g.jsx)(f.a.Text,{children:"Application Language"})}),Object(g.jsx)(j.a,{id:"applicationLanguage",value:this.props.policy.policy.applicationLanguage||"",onChange:function(e){return n.handleChange(e)}})]}),Object(g.jsxs)(f.a,{size:"sm",children:[Object(g.jsx)(f.a.Prepend,{children:Object(g.jsx)(f.a.Text,{children:"Enforcement Mode"})}),Object(g.jsx)(j.a,{id:"enforcementMode",value:this.props.policy.policy.enforcementMode||"",onChange:function(e){return n.handleChange(e)}})]}),Object(g.jsxs)(f.a,{size:"sm",children:[Object(g.jsx)(f.a.Prepend,{children:Object(g.jsx)(f.a.Text,{children:"Template"})}),Object(g.jsx)(j.a,{id:"template.name",value:(null===(e=this.props.policy.policy)||void 0===e||null===(t=e.template)||void 0===t?void 0:t.name)||"",onChange:function(e){return n.handleChange(e)}})]})]})}}]),n}(l.a.Component),k=n(34),m=n(23),P=n(22),V=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).handleChange=c.handleChange.bind(Object(a.a)(c)),c.addViolation=c.addViolation.bind(Object(a.a)(c)),c.removeViolation=c.removeViolation.bind(Object(a.a)(c)),c}return Object(c.a)(n,[{key:"handleChange",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy);v(t.policy,e.target.id,e.target.checked),this.props.onChange(t)}},{key:"addViolation",value:function(e){var t,n,i=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy),c=(null===(t=i.policy)||void 0===t||null===(n=t["blocking-settings"])||void 0===n?void 0:n.violations)||[];c.find((function(t){return t.name===e.target.id}))||c.push({name:e.target.id,alarm:this.props.policy.getAllViolations().find((function(t){return t.name===e.target.id})).alarm||!1,block:this.props.policy.getAllViolations().find((function(t){return t.name===e.target.id})).block||!1,learn:this.props.policy.getAllViolations().find((function(t){return t.name===e.target.id})).learn||!1}),i.policy["blocking-settings"]={violations:c},this.props.onChange(i)}},{key:"removeViolation",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy);t.policy["blocking-settings"].violations.splice(e.target.id,1),0===t.policy["blocking-settings"].violations.length&&delete t.policy["blocking-settings"].violations,0===Object.keys(t.policy["blocking-settings"]).length&&delete t.policy["blocking-settings"],this.props.onChange(t)}},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Blocking Settings"}),Object(g.jsxs)(m.a,{children:[Object(g.jsx)(H,{violations:this.props.policy.getAllViolations(),onClick:this.addViolation}),Object(g.jsx)(S,{policy:this.props.policy,onChange:this.handleChange,onRemove:this.removeViolation})]})]})}}]),n}(l.a.Component),H=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsx)(b.a,{children:Object(g.jsxs)(P.a,{children:[Object(g.jsx)(P.a.Toggle,{id:"dropdown-basic",children:"Violations"}),Object(g.jsx)(P.a.Menu,{children:this.props.violations.map((function(t){return Object(g.jsx)(P.a.Item,{id:t.name,onClick:e.props.onClick,children:t.title},t.name)}))})]})})}}]),n}(l.a.Component),S=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t,n,i=this;return Object(g.jsxs)("div",{children:[Object(g.jsxs)(b.a,{children:[Object(g.jsx)(O.a,{children:"Violation"}),Object(g.jsx)(O.a,{children:"Alarm"}),Object(g.jsx)(O.a,{children:"Block"}),Object(g.jsx)(O.a,{children:"Learn"}),Object(g.jsx)(O.a,{})]}),null===(e=this.props.policy.policy)||void 0===e||null===(t=e["blocking-settings"])||void 0===t||null===(n=t.violations)||void 0===n?void 0:n.map((function(e){var t;return Object(g.jsx)(b.a,{children:Object(g.jsxs)(f.a,{size:"sm",children:[Object(g.jsx)(O.a,{children:null===(t=i.props.policy.getAllViolations().find((function(t){return t.name===e.name})))||void 0===t?void 0:t.title}),Object(g.jsx)(O.a,{children:Object(g.jsx)(m.a.Check,{id:"blocking-settings.violations["+i.props.policy.policy["blocking-settings"].violations.indexOf(e)+"].alarm",checked:e.alarm||!1,onChange:function(e){return i.props.onChange(e)}})}),Object(g.jsx)(O.a,{children:Object(g.jsx)(m.a.Check,{type:"checkbox",id:"blocking-settings.violations["+i.props.policy.policy["blocking-settings"].violations.indexOf(e)+"].block",checked:e.block||!1,onChange:function(e){return i.props.onChange(e)}})}),Object(g.jsx)(O.a,{children:Object(g.jsx)(m.a.Check,{type:"checkbox",id:"blocking-settings.violations["+i.props.policy.policy["blocking-settings"].violations.indexOf(e)+"].learn",checked:e.learn||!1,onChange:function(e){return i.props.onChange(e)}})}),Object(g.jsx)(O.a,{children:Object(g.jsx)(k.a,{size:"sm",id:i.props.policy.policy["blocking-settings"].violations.indexOf(e),onClick:function(e){return i.props.onRemove(e)},children:"Remove"})})]})},e.name)}))]})}}]),n}(l.a.Component),T=n(76),A=n(77),N=n(28),B=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).addHeader=c.addHeader.bind(Object(a.a)(c)),c.handleChange=c.handleChange.bind(Object(a.a)(c)),c.changeType=c.changeType.bind(Object(a.a)(c)),c.toggleCheckbox=c.toggleCheckbox.bind(Object(a.a)(c)),c.toggleBase64=c.toggleBase64.bind(Object(a.a)(c)),c.delHeader=c.delHeader.bind(Object(a.a)(c)),c.delHeader=c.delHeader.bind(Object(a.a)(c)),c}return Object(c.a)(n,[{key:"handleChange",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy);v(t.policy,e.target.id,e.target.value),this.props.onChange(t)}},{key:"changeType",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy);v(t.policy,e.target.id,e.target.text),this.props.onChange(t)}},{key:"toggleCheckbox",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy);v(t.policy,e.target.id,e.target.checked),this.props.onChange(t)}},{key:"toggleBase64",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy),n=e.target.checked?"enabled":"disabled";v(t.policy,e.target.id,n),this.props.onChange(t)}},{key:"addHeader",value:function(e){var t,n=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy),i=(null===(t=n.policy)||void 0===t?void 0:t.headers)||[];i.push(new N.Header({name:"changeme-"+Math.random().toString(36).substring(10),type:"explicit",decodeValueAsBase64:"enabled",htmlNormalization:!0,mandatory:!0,allowRepeatedOccurrences:!1,checkSignatures:!0})),n.policy.headers=i,this.props.onChange(n)}},{key:"delHeader",value:function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(this.props.policy)),this.props.policy);t.policy.headers.splice(e.target.id,1),0===t.policy.headers.length&&delete t.policy.headers,this.props.onChange(t)}},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Headers"}),Object(g.jsx)(w,{policy:this.props.policy,delHeader:this.delHeader,addHeader:this.addHeader,handleChange:this.handleChange,changeType:this.changeType,toggleCheckbox:this.toggleCheckbox,toggleBase64:this.toggleBase64})]})}}]),n}(l.a.Component),w=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t,n=this;return Object(g.jsxs)("div",{children:[Object(g.jsxs)(T.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"Header Name"}),Object(g.jsx)("th",{children:"Type"}),Object(g.jsx)("th",{children:"Mandatory"}),Object(g.jsx)("th",{children:"Check Signatures"}),Object(g.jsx)("th",{children:"Normalize HTML"}),Object(g.jsx)("th",{children:"Decode Base64"}),Object(g.jsx)("th",{children:"Allow Repeated"}),Object(g.jsx)("th",{})]})}),Object(g.jsx)("tbody",{children:null===(e=this.props.policy.policy)||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.map((function(e,t){return Object(g.jsxs)("tr",{className:"text-center",children:[Object(g.jsx)("td",{children:Object(g.jsx)(j.a,{id:"headers["+n.props.policy.policy.headers.indexOf(e)+"].name",onChange:function(e){return n.props.handleChange(e)},size:"sm",value:e.name})}),Object(g.jsx)("td",{children:Object(g.jsxs)(P.a,{as:A.a,size:"sm",children:[Object(g.jsx)(P.a.Toggle,{children:e.type}),Object(g.jsxs)(P.a.Menu,{children:[Object(g.jsx)(P.a.Item,{id:"headers["+n.props.policy.policy.headers.indexOf(e)+"].type",onClick:function(e){return n.props.changeType(e)},children:"explicit"},"explicit"),Object(g.jsx)(P.a.Item,{id:"headers["+n.props.policy.policy.headers.indexOf(e)+"].type",onClick:function(e){return n.props.changeType(e)},children:"wildcard"},"wildcard")]})]})}),Object(g.jsx)("td",{children:Object(g.jsx)(m.a.Check,{id:"headers["+n.props.policy.policy.headers.indexOf(e)+"].mandatory",onChange:function(e){return n.props.toggleCheckbox(e)},checked:e.mandatory})}),Object(g.jsx)("td",{children:Object(g.jsx)(m.a.Check,{id:"headers["+n.props.policy.policy.headers.indexOf(e)+"].checkSignatures",onChange:function(e){return n.props.toggleCheckbox(e)},checked:e.checkSignatures})}),Object(g.jsx)("td",{children:Object(g.jsx)(m.a.Check,{id:"headers["+n.props.policy.policy.headers.indexOf(e)+"].htmlNormalization",onChange:function(e){return n.props.toggleCheckbox(e)},checked:e.htmlNormalization})}),Object(g.jsx)("td",{children:Object(g.jsx)(m.a.Check,{id:"headers["+n.props.policy.policy.headers.indexOf(e)+"].decodeValueAsBase64",onChange:function(e){return n.props.toggleBase64(e)},checked:"enabled"===e.decodeValueAsBase64})}),Object(g.jsx)("td",{children:Object(g.jsx)(m.a.Check,{id:"headers["+n.props.policy.policy.headers.indexOf(e)+"].allowRepeatedOccurrences",onChange:function(e){return n.props.toggleCheckbox(e)},checked:e.allowRepeatedOccurrences})}),Object(g.jsx)("td",{children:Object(g.jsx)(k.a,{size:"sm",id:n.props.policy.policy.headers.indexOf(e),onClick:function(e){return n.props.delHeader(e)},children:"Remove"})})]},e.index)}))})]}),Object(g.jsx)(k.a,{size:"sm",onClick:function(e){return n.props.addHeader(e)},children:"Add Header"})]})}}]),n}(l.a.Component),z=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:["General"===this.props.visibleComponent&&Object(g.jsx)(C,{policy:this.props.policy,onChange:this.props.onChange}),"Blocking Settings"===this.props.visibleComponent&&Object(g.jsx)(V,{policy:this.props.policy,onChange:this.props.onChange}),"Headers"===this.props.visibleComponent&&Object(g.jsx)(B,{policy:this.props.policy,onChange:this.props.onChange})]})}}]),n}(l.a.Component),M={policy:{name:"policy_name",template:{name:"POLICY_TEMPLATE_NGINX_BASE"},applicationLanguage:"utf-8",enforcementMode:"blocking"}},L=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).state={policy:new N.Policy(M),textArea:JSON.stringify(new N.Policy(M),void 0,4),visibleComponent:"General",isValid:new N.Policy(M).isValid()},c.handleChange=c.handleChange.bind(Object(a.a)(c)),c.handleMenuClick=c.handleMenuClick.bind(Object(a.a)(c)),c}return Object(c.a)(n,[{key:"handleChange",value:function(e){this.setState((function(t){return{isValid:Object(N.isValidPolicy)(e),policy:new N.Policy(e),textArea:JSON.stringify(e.toPolicy(),void 0,4)}}))}},{key:"handleTextChange",value:function(e){this.setState((function(){return{textArea:e.target.value}})),function(e){if("string"!==typeof e)return!1;try{return JSON.parse(e),!0}catch(t){return!1}}(e.target.value)&&Object(N.isValidPolicy)(JSON.parse(e.target.value))?this.setState({isValid:!0,policy:new N.Policy(JSON.parse(e.target.value))}):this.setState({isValid:!1})}},{key:"handleMenuClick",value:function(e){this.setState((function(){return{visibleComponent:e}}))}},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"app",children:Object(g.jsxs)(d.a,{children:[Object(g.jsx)(b.a,{children:Object(g.jsx)(O.a,{children:Object(g.jsx)("h1",{children:"NGINX App Protect Policy Configurator"})})}),Object(g.jsxs)(b.a,{children:[Object(g.jsx)(O.a,{md:"auto",children:Object(g.jsx)(y,{onClick:this.handleMenuClick,activeKey:this.state.visibleComponent})}),Object(g.jsx)(O.a,{children:Object(g.jsx)(z,{policy:this.state.policy,onChange:this.handleChange,visibleComponent:this.state.visibleComponent})})]}),Object(g.jsx)(b.a,{children:Object(g.jsx)(O.a,{children:Object(g.jsx)(j.a,{as:"textarea",value:this.state.textArea,rows:20,cols:60,onChange:function(t){return e.handleTextChange(t)},style:{color:this.state.isValid?"green":"red"}})})})]})})}}]),n}(l.a.Component);h.a.render(Object(g.jsx)(L,{}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.e7d8fba6.chunk.js.map