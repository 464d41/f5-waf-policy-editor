(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{149:function(e,t,n){"use strict";n.r(t);var i=n(11),a=n(12),c=n(45),r=n(14),o=n(13),s=n(0),l=n.n(s),h=n(52),p=n.n(h),d=(n(83),n(78)),j=n(19),u=n(56),g=n(31),b=n(57),O=n(1),x=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(O.jsxs)(b.a,{variant:"pills",className:"flex-column",activeKey:this.props.activeKey,children:[Object(O.jsx)(y,{name:"General",onClick:this.props.onClick}),Object(O.jsx)(y,{name:"Blocking Settings",onClick:this.props.onClick}),Object(O.jsx)(y,{name:"Signatures",onClick:this.props.onClick}),Object(O.jsx)(y,{name:"Headers",onClick:this.props.onClick}),Object(O.jsx)(y,{name:"Bot Defense",onClick:this.props.onClick})]})}}]),n}(l.a.Component),y=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(O.jsx)(b.a.Item,{onClick:function(){return e.props.onClick(e.props.name)},children:Object(O.jsx)(b.a.Link,{eventKey:this.props.name,children:this.props.name})})}}]),n}(l.a.Component),v=n(17),m=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={policy:a.props.policy},a}return Object(a.a)(n,[{key:"changeName",value:function(e){var t=this.props.policy;t.name=e.target.value,this.props.onChange(t)}},{key:"changeApplicationLanguage",value:function(e){var t=this.props.policy;t.applicationLanguage=e.target.value,this.props.onChange(t)}},{key:"changeEnforcementMode",value:function(e){var t=this.props.policy;t.enforcementMode=e.target.value,this.props.onChange(t)}},{key:"changeTemplateName",value:function(e){var t=this.props.policy;t.template.name=e.target.value,this.props.onChange(t)}},{key:"render",value:function(){var e,t,n=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"General Settings"}),Object(O.jsxs)(v.a,{size:"sm",children:[Object(O.jsx)(v.a.Prepend,{children:Object(O.jsx)(v.a.Text,{children:"Policy Name"})}),Object(O.jsx)(j.a,{type:"text",value:this.props.policy.name,onChange:function(e){return n.changeName(e)}})]}),Object(O.jsxs)(v.a,{size:"sm",children:[Object(O.jsx)(v.a.Prepend,{children:Object(O.jsx)(v.a.Text,{children:"Application Language"})}),Object(O.jsx)(j.a,{value:this.props.policy.applicationLanguage,onChange:function(e){return n.changeApplicationLanguage(e)}})]}),Object(O.jsxs)(v.a,{size:"sm",children:[Object(O.jsx)(v.a.Prepend,{children:Object(O.jsx)(v.a.Text,{children:"Enforcement Mode"})}),Object(O.jsx)(j.a,{value:this.props.policy.enforcementMode,onChange:function(e){return n.changeEnforcementMode(e)}})]}),Object(O.jsxs)(v.a,{size:"sm",children:[Object(O.jsx)(v.a.Prepend,{children:Object(O.jsx)(v.a.Text,{children:"Template"})}),Object(O.jsx)(j.a,{value:null===(e=this.props.policy)||void 0===e||null===(t=e.template)||void 0===t?void 0:t.name,onChange:function(e){return n.changeTemplateName(e)}})]})]})}}]),n}(l.a.Component),C=n(28),f=n(55),k=n(25),S=n(20),N=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Blocking Settings"}),Object(O.jsx)(A,{policy:this.props.policy,onChange:this.props.onChange}),Object(O.jsx)(V,{policy:this.props.policy,onChange:this.props.onChange})]})}}]),n}(l.a.Component),A=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"addViolation",value:function(e){var t=this.props.policy,n=t.getAllViolations().find((function(t){return t.name===e.target.id}));t.blockingSettings.violations.push(n),this.props.onChange(t)}},{key:"render",value:function(){var e=this;return Object(O.jsxs)(S.a,{className:"mb-2",children:[Object(O.jsx)(S.a.Toggle,{id:"dropdown-basic",children:"Violations"}),Object(O.jsx)(S.a.Menu,{children:this.props.policy.getAllViolations().map((function(t){return Object(O.jsx)(S.a.Item,{id:t.name,onClick:function(t){return e.addViolation(t)},children:t.title},t.name)}))})]})}}]),n}(l.a.Component),V=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"toggleAlarm",value:function(e){var t=this.props.policy;t.blockingSettings.violations[e.target.id].alarm=!t.blockingSettings.violations[e.target.id].alarm,this.props.onChange(t)}},{key:"toggleBlock",value:function(e){var t=this.props.policy;t.blockingSettings.violations[e.target.id].block=!t.blockingSettings.violations[e.target.id].block,this.props.onChange(t)}},{key:"toggleLearn",value:function(e){var t=this.props.policy;t.blockingSettings.violations[e.target.id].learn=!t.blockingSettings.violations[e.target.id].learn,this.props.onChange(t)}},{key:"delViolation",value:function(e){var t=this.props.policy;t.blockingSettings.violations.splice(e.target.id),this.props.onChange(t)}},{key:"delAllViolations",value:function(e){var t=this.props.policy;t.blockingSettings.violations=[],this.props.onChange(t)}},{key:"render",value:function(){var e,t=this;return Object(O.jsx)("div",{children:Object(O.jsxs)(f.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"text-center",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"text-left",children:"Violation"}),Object(O.jsx)("th",{children:"Alarm"}),Object(O.jsx)("th",{children:"Block"}),Object(O.jsx)("th",{children:"Learn"}),Object(O.jsx)("th",{children:Object(O.jsx)(C.a,{size:"sm",onClick:function(e){return t.delAllViolations(e)},children:"Remove"})})]})}),Object(O.jsx)("tbody",{children:null===(e=this.props.policy.blockingSettings.violations)||void 0===e?void 0:e.map((function(e,n){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"text-left",children:e.title}),Object(O.jsx)("td",{children:Object(O.jsx)(k.a.Check,{id:n.toString(),checked:e.alarm||!1,onChange:function(e){return t.toggleAlarm(e)}})}),Object(O.jsx)("td",{children:Object(O.jsx)(k.a.Check,{type:"checkbox",id:n.toString(),checked:e.block||!1,onChange:function(e){return t.toggleBlock(e)}})}),Object(O.jsx)("td",{children:Object(O.jsx)(k.a.Check,{type:"checkbox",id:n.toString(),checked:e.learn||!1,onChange:function(e){return t.toggleLearn(e)}})}),Object(O.jsx)("td",{children:Object(O.jsx)(C.a,{size:"sm",id:n.toString(),onClick:function(e){return t.delViolation(e)},children:"Remove"})})]},e.name)}))})]})})}}]),n}(l.a.Component),z=n(77),w=n(29),P=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Headers"}),Object(O.jsx)(T,{policy:this.props.policy,onChange:this.props.onChange})]})}}]),n}(l.a.Component),T=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"changeName",value:function(e){var t=this.props.policy;t.headers[e.target.id].name=e.target.value,this.props.onChange(t)}},{key:"changeType",value:function(e){var t=this.props.policy;t.headers[e.target.id].type=e.target.text,this.props.onChange(t)}},{key:"toggleMandatory",value:function(e){var t=this.props.policy;t.headers[e.target.id].mandatory=!t.headers[e.target.id].mandatory,this.props.onChange(t)}},{key:"toggleCheckSignatures",value:function(e){var t=this.props.policy;t.headers[e.target.id].checkSignatures=!t.headers[e.target.id].checkSignatures,this.props.onChange(t)}},{key:"toggleHtmlNormalization",value:function(e){var t=this.props.policy;t.headers[e.target.id].htmlNormalization=!t.headers[e.target.id].htmlNormalization,this.props.onChange(t)}},{key:"toggleBase64",value:function(e){var t=this.props.policy;t.headers[e.target.id].decodeValueAsBase64=!t.headers[e.target.id].decodeValueAsBase64,this.props.onChange(t)}},{key:"toggleAllowRepeatedOccurrences",value:function(e){var t=this.props.policy;t.headers[e.target.id].allowRepeatedOccurrences=!t.headers[e.target.id].allowRepeatedOccurrences,this.props.onChange(t)}},{key:"addHeader",value:function(e){var t=this.props.policy,n=new w.Header;t.headers.push(n),this.props.onChange(t)}},{key:"delHeader",value:function(e){var t=this.props.policy;t.headers.splice(e.target.id,1),this.props.onChange(t)}},{key:"delAllHeaders",value:function(e){var t=this.props.policy;t.headers=[],this.props.onChange(t)}},{key:"render",value:function(){var e,t,n=this;return Object(O.jsxs)("div",{children:[Object(O.jsxs)(f.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Header Name"}),Object(O.jsx)("th",{children:"Type"}),Object(O.jsx)("th",{children:"Mandatory"}),Object(O.jsx)("th",{children:"Check Signatures"}),Object(O.jsx)("th",{children:"Normalize HTML"}),Object(O.jsx)("th",{children:"Decode Base64"}),Object(O.jsx)("th",{children:"Allow Repeated"}),Object(O.jsx)("th",{children:Object(O.jsx)(C.a,{size:"sm",onClick:this.props.delAllHeaders,children:"Remove"})})]})}),Object(O.jsx)("tbody",{children:null===(e=this.props.policy)||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.map((function(e,t){return Object(O.jsxs)("tr",{className:"text-center",children:[Object(O.jsx)("td",{children:Object(O.jsx)(j.a,{id:n.props.policy.headers.indexOf(e).toString(),onChange:function(e){return n.changeName(e)},size:"sm",value:e.name})}),Object(O.jsx)("td",{children:Object(O.jsxs)(S.a,{as:z.a,size:"sm",children:[Object(O.jsx)(S.a.Toggle,{children:e.type}),Object(O.jsxs)(S.a.Menu,{children:[Object(O.jsx)(S.a.Item,{id:n.props.policy.headers.indexOf(e).toString(),onClick:function(e){return n.changeType(e)},children:"explicit"}),Object(O.jsx)(S.a.Item,{id:n.props.policy.headers.indexOf(e).toString(),onClick:function(e){return n.changeType(e)},children:"wildcard"})]})]})}),Object(O.jsx)("td",{children:Object(O.jsx)(k.a.Check,{id:n.props.policy.headers.indexOf(e).toString(),onChange:function(e){return n.toggleMandatory(e)},checked:e.mandatory})}),Object(O.jsx)("td",{children:Object(O.jsx)(k.a.Check,{id:n.props.policy.headers.indexOf(e).toString(),onChange:function(e){return n.toggleCheckSignatures(e)},checked:e.checkSignatures})}),Object(O.jsx)("td",{children:Object(O.jsx)(k.a.Check,{id:n.props.policy.headers.indexOf(e).toString(),onChange:function(e){return n.toggleHtmlNormalization(e)},checked:e.htmlNormalization})}),Object(O.jsx)("td",{children:Object(O.jsx)(k.a.Check,{id:n.props.policy.headers.indexOf(e).toString(),onChange:function(e){return n.toggleBase64(e)},checked:e.decodeValueAsBase64})}),Object(O.jsx)("td",{children:Object(O.jsx)(k.a.Check,{id:n.props.policy.headers.indexOf(e).toString(),onChange:function(e){return n.toggleAllowRepeatedOccurrences(e)},checked:e.allowRepeatedOccurrences})}),Object(O.jsx)("td",{children:Object(O.jsx)(C.a,{size:"sm",onClick:function(e){return n.delHeader(e)},children:"Remove"})})]},t)}))})]}),Object(O.jsx)(C.a,{size:"sm",onClick:function(e){return n.addHeader(e)},children:"Add Header"})]})}}]),n}(l.a.Component),H=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{children:["General"===this.props.visibleComponent&&Object(O.jsx)(m,{policy:this.props.policy,onChange:this.props.onChange}),"Blocking Settings"===this.props.visibleComponent&&Object(O.jsx)(N,{policy:this.props.policy,onChange:this.props.onChange}),"Headers"===this.props.visibleComponent&&Object(O.jsx)(P,{policy:this.props.policy,onChange:this.props.onChange})]})}}]),n}(l.a.Component);var M=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={policy:new w.Policy,textArea:JSON.stringify((new w.Policy).toPolicy(),void 0,4),visibleComponent:"General",isValid:(new w.Policy).isValid()},a.handleChange=a.handleChange.bind(Object(c.a)(a)),a.handleMenuClick=a.handleMenuClick.bind(Object(c.a)(a)),a}return Object(a.a)(n,[{key:"handleChange",value:function(e){this.setState((function(t){return{isValid:Object(w.isValidPolicy)(e.toPolicy()),policy:e,textArea:JSON.stringify(e.toPolicy(),void 0,4)}}))}},{key:"handleTextChange",value:function(e){this.setState({textArea:e.target.value}),function(e){if("string"!==typeof e)return!1;try{return JSON.parse(e),!0}catch(t){return!1}}(e.target.value)&&Object(w.isValidPolicy)(JSON.parse(e.target.value))?this.setState({isValid:!0,policy:new w.Policy(JSON.parse(e.target.value))}):this.setState({isValid:!1})}},{key:"handleMenuClick",value:function(e){this.setState((function(){return{visibleComponent:e}}))}},{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{className:"app",children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)(u.a,{children:Object(O.jsx)(g.a,{children:Object(O.jsx)("h1",{children:"NGINX App Protect Policy Editor"})})}),Object(O.jsxs)(u.a,{children:[Object(O.jsx)(g.a,{md:"auto",children:Object(O.jsx)(x,{onClick:this.handleMenuClick,activeKey:this.state.visibleComponent})}),Object(O.jsx)(g.a,{children:Object(O.jsx)(H,{policy:this.state.policy,onChange:this.handleChange,visibleComponent:this.state.visibleComponent})})]}),Object(O.jsx)(u.a,{children:Object(O.jsx)(g.a,{children:Object(O.jsx)(j.a,{as:"textarea",value:this.state.textArea,rows:20,cols:60,onChange:function(t){return e.handleTextChange(t)},style:{color:this.state.isValid?"green":"red"}})})})]})})}}]),n}(l.a.Component);p.a.render(Object(O.jsx)(M,{}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.20e5ff6e.chunk.js.map